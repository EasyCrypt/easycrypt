(library
 (name lospecs)
 (public_name easycrypt.lospecs)
 (flags
  (:standard -open Batteries))
 (modules :standard \ lospecs_test circuit_test)
 (preprocess
  (pps ppx_deriving.show))
 (foreign_stubs
  (language c)
  (flags :standard -Wno-unused-command-line-argument -mavx -mavx2 -mavx512vl)
  (names avx2_runtime))
 (libraries batteries menhirLib zarith))

(executable
 (name lospecs_test)
 (flags
  (:standard -open Batteries))
 (modules lospecs_test)
 (promote (until-clean))
 (libraries batteries lospecs))

(executable
 (name circuit_test)
 (flags
  (:standard -open Batteries))
 (modules circuit_test)
 (promote (until-clean))
 (libraries batteries hex iter lospecs progress))

(ocamllex lexer)

(menhir
 (modules parser)
 (flags --table --explain))
